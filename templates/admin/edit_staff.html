{% extends 'admin/base.html' %}
{% load static %}
{% block content %}
          <!-- Content wrapper -->
          <div class="content-wrapper">
            <!-- Content -->

            <div class="container-xxl flex-grow-1 container-p-y">
              <h4 class="fw-bold py-3 mb-4"><span class="text-muted fw-light">Manage Staff/</span>  Update Staff</h4>
              <!-- Basic Layout & Basic with Icons -->
              <div class="row">
                <!-- Basic Layout -->
                <div class="col-xxl">
                  <div class="card mb-4">        
                    <div class="card-body">
                        
                      <form method="POST" enctype="multipart/form-data">
                        {% csrf_token %}
                        <div class="row mb-3">
                            <label class="col-sm-2 col-form-label" for="basic-default-name">User Name</label>
                            <div class="col-sm-10">
                              <input type="text" class="form-control" id="basic-default-name" value="{{update.username}}" placeholder="User Name" name="username"  required/>
                            </div>
                          </div>

                        <div class="row mb-3">
                          <label class="col-sm-2 col-form-label" for="basic-default-name">Staff Name</label>
                          <div class="col-sm-10">
                            <input type="text" class="form-control" id="basic-default-name" placeholder="Enter Staff Name" value="{{update.name}}" name="name" required/>
                          </div>
                        </div>

                     
                        
                        <div class="row mb-3">
                          <label class="col-sm-2 col-form-label" for="basic-default-name">Phone No</label>
                          <div class="col-sm-10">
                            <input type="text" class="form-control" id="basic-default-name" placeholder="Enter Phone No" value="{{update.mobile}}" name="phone" pattern="\d{10}" title="Phone number must be 10 digits"   required/>
                          </div>
                        </div>
                        
                         <div class="row mb-3">
                          <label class="col-sm-2 col-form-label" for="basic-default-name">Email Id</label>
                          <div class="col-sm-10">
                              <input type="email" class="form-control" id="basic-default-name" placeholder="Enter Email Id" value="{{update.email}}" name="email" required 
                                    pattern="[a-z0-9._%+-]+@gmail\.com" title="Please enter a valid Gmail address in lowercase (e.g., example@gmail.com)">
                              <small class="text-muted">Only lowercase letters are allowed, and the email should end with @gmail.com</small>
                          </div>
                      </div>
                       
                        <div class="row mb-3">
                            <label class="col-sm-2 col-form-label" for="role">Role</label>
                            <div class="col-sm-10">
                             
                                <select class="form-control" id="role" name="Role" required>
                                    <option value="{{update.role}}" disabled selected>{{update.role}}</option>
                                    
                                    <option value="Stock Manager">Stock Manager</option>
                                    <option value="Delivery Boy">Delivery Boy</option>
                                </select>
                            </div>
                        </div>
                         
                                
                        <div class="row justify-content-end">
                          <div class="col-sm-10">
                            <button type="submit" class="btn btn-primary">Update </button>
                          </div>
                        </div>
                      </form>
                    </div>
                  </div>
                </div>
            
                
              </div>
            </div>
          <script>
                document.querySelector('form').addEventListener('submit', function (event) {
                    const emailInput = document.getElementById('basic-default-name');
                    const emailPattern = /^[a-z0-9._%+-]+@gmail\.com$/;
                    if (!emailPattern.test(emailInput.value)) {
                        alert('Please enter a valid Gmail address in lowercase (e.g., example@gmail.com)');
                        event.preventDefault(); // Prevent form submission
                    }
                });
            </script>
{% endblock %}  